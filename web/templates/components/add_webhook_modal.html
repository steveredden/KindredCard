{{define "add_webhook_modal"}}
<!-- Add/Edit Webhook Modal -->
<dialog id="webhookModal" class="modal">
    <div class="modal-box w-11/12 max-w-3xl">
        <!-- Header -->
        <div class="flex justify-between items-center mb-6">
            <h3 class="font-bold text-2xl" id="webhookModalTitle">Add Discord Webhook</h3>
            <button type="button" class="btn btn-sm btn-circle btn-ghost" onclick="closeWebhookModal()">‚úï</button>
        </div>

        <form id="webhookForm" class="space-y-4">
            <input type="hidden" id="webhook_id" name="webhook_id">

            <!-- Name -->
            <div class="form-control">
                <label class="label">
                    <span class="label-text font-semibold">Webhook Name*</span>
                </label>
                <input type="text" id="webhook_name" name="webhook_name" class="input input-bordered" placeholder="My Birthday Notifications" required>
                <label class="label">
                    <span class="label-text-alt">A friendly name to identify this webhook</span>
                </label>
            </div>

            <!-- Event Type
            <div class="form-control">
                <label class="label">
                    <span class="label-text font-semibold">Event Type</span>
                </label>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <label class="label cursor-pointer border-2 border-base-300 rounded-lg p-4 hover:border-primary">
                        <div class="flex items-center gap-3">
                            <input type="radio" name="event_type" value="birthday" class="radio radio-primary" checked>
                            <div>
                                <span class="text-2xl">üéÇ</span>
                                <span class="font-semibold ml-2">Birthdays</span>
                            </div>
                        </div>
                    </label>
                    <label class="label cursor-pointer border-2 border-base-300 rounded-lg p-4 hover:border-secondary">
                        <div class="flex items-center gap-3">
                            <input type="radio" name="event_type" value="anniversary" class="radio radio-secondary">
                            <div>
                                <span class="text-2xl">üíç</span>
                                <span class="font-semibold ml-2">Anniversaries</span>
                            </div>
                        </div>
                    </label>
                </div>
            </div> -->

            <!-- Webhook URL -->
            <div class="form-control">
                <label class="label">
                    <span class="label-text font-semibold">Discord Webhook URL*</span>
                </label>
                <input type="url" id="webhook_url" name="webhook_url" class="input input-bordered font-mono text-sm" placeholder="https://discord.com/api/webhooks/..." required>
                <label class="label">
                    <span class="label-text-alt">Get this from Discord Server Settings ‚Üí Integrations ‚Üí Webhooks</span>
                </label>
            </div>

            <!-- Timing Settings -->
            <div class="card bg-base-200 shadow-md">
                <div class="card-body">
                    <h3 class="font-bold mb-4">Notification Timing</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="form-control">
                            <label class="label">
                                <span class="label-text">Notify on events ocurring in the next...</span>
                            </label>
                            <select id="webhook_days_look_ahead" name="webhook_days_look_ahead" class="select select-bordered">
                                <option value="0" selected>Today</option>
                                <option value="1">1 days</option>
                                <option value="2">2 days</option>
                                <option value="3">3 days</option>
                                <option value="7">1 week</option>
                            </select>
                        </div>

                        <div class="form-control">
                            <label class="label">
                                <span class="label-text">Time of Day (24-hour)</span>
                            </label>
                            <input type="time" id="webhook_notification_time" name="webhook_notification_time" class="input input-bordered" value="09:00" required>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Options -->
            <div class="card bg-base-200 shadow-md">
                <div class="card-body">
                    <h3 class="font-bold mb-4">Options</h3>
                    <div class="space-y-3">
                        <div class="form-control">
                            <label class="label cursor-pointer justify-start gap-3">
                                <input type="checkbox" id="webhook_enabled" name="webhook_enabled" class="toggle toggle-primary" checked>
                                <span class="label-text font-semibold">Enable this webhook</span>
                            </label>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div class="form-control">
                                <label class="label cursor-pointer justify-start gap-3">
                                    <input type="checkbox" id="webhook_include_birthdays" name="webhook_include_birthdays" class="checkbox checkbox-primary">
                                    <span class="label-text">Include Birthday Events</span>
                                </label>
                            </div>

                            <div class="form-control">
                                <label class="label cursor-pointer justify-start gap-3">
                                    <input type="checkbox" id="webhook_include_anniversaries" name="webhook_include_anniversaries" class="checkbox checkbox-primary">
                                    <span class="label-text">Include Anniversary Events</span>
                                </label>
                            </div>
                        </div>
                        <div class="form-control">
                            <label class="label cursor-pointer justify-start gap-3">
                                <input type="checkbox" id="webhook_include_event_dates" name="webhook_include_event_dates" class="checkbox checkbox-primary">
                                <span class="label-text">Include Other Events</span>
                            </label>
                        </div>

                        <!-- Other Event Regex -->
                        <div class="form-control">
                            <label class="label">
                                <span class="label-text font-semibold">Other Events Regex Filter</span>
                            </label>
                            <input type="text" id="webhook_other_event_regex" name="webhook_other_event_regex" class="input input-bordered font-mono text-sm" placeholder="(first tooth|rode (bike|scooter))">
                            <label class="label">
                                <span class="label-text-alt">Omit to include all events regardless of their Name. Case insensitive.</span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Preview -->
            <!-- <div class="card bg-base-200 shadow-md">
                <div class="card-body">
                    <h3 class="font-bold mb-2">Preview</h3>
                    <div class="mockup-code text-sm">
                        <pre data-prefix="üì¢"><code>KindredCard Birthday Reminder üéÇ</code></pre>
                        <pre data-prefix=""><code> </code></pre>
                        <pre data-prefix="üéâ"><code><strong>John Doe</strong>'s birthday is tomorrow!</code></pre>
                        <pre data-prefix="üìÖ"><code>Date: April 15</code></pre>
                        <pre data-prefix="üéÇ"><code>Turning 30 years old</code></pre>
                    </div>
                </div>
            </div> -->

            <!-- Actions -->
            <div class="modal-action">
                <button type="button" class="btn btn-ghost" onclick="closeWebhookModal()">Cancel</button>
                <button type="submit" class="btn btn-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                    </svg>
                    <span id="webhookSubmitText">Save Webhook</span>
                </button>
            </div>
        </form>
    </div>
    <form method="dialog" class="modal-backdrop">
        <button>close</button>
    </form>
</dialog>
{{end}}
