{{define "content"}}
    {{template "util_layout" .}}
{{end}}

{{define "util_body"}}
    <div class="side-action-btn hidden md:block w-24"></div>

    <div id="contact-deck" class="w-full max-w-xl">
        {{if .Items}}
            {{range $index, $s := .Items}}
            <div class="util-card {{if ne $index 0}}hidden{{end}} card bg-base-100 shadow-xl border border-base-300">
                <div class="card-body">
                    <h2 class="card-title justify-center opacity-50 text-xs uppercase tracking-widest mb-4">Proposed Connection</h2>
                    
                    <div class="flex items-center justify-between my-4 gap-4 bg-base-200 p-6 rounded-2xl">
                        <div class="text-center flex-1">
                            <div class="text-xs opacity-50 mb-1">Source</div>
                            <div class="font-bold leading-tight">{{$s.SourceName}}</div>
                        </div>
                        
                        <div class="flex flex-col items-center flex-1 px-2">
                            <div class="badge badge-primary font-bold whitespace-nowrap mb-1">{{$s.ProposedVal}}</div>
                            <div class="text-xl opacity-30">âž”</div>
                        </div>
                        
                        <div class="text-center flex-1">
                            <div class="text-xs opacity-50 mb-1">Target</div>
                            <div class="font-bold leading-tight">{{$s.TargetName}}</div>
                        </div>
                    </div>

                    <div class="alert bg-info/5 border-info/20 mb-6 flex items-start gap-3">
                        <svg xmlns="http://www.w3.org/2000/svg" class="stroke-info shrink-0 w-5 h-5 mt-0.5" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                        <p class="text-sm italic opacity-80 leading-snug">{{$s.Reason}}</p>
                    </div>

                    <div class="card-actions flex-col items-center gap-3">
                        <button onclick="applyRel(event, '{{$s.TargetID}}', '{{$s.ProposedID}}', '{{$s.RelationshipTypeID}}')" 
                                class="btn btn-primary btn-block shadow-lg">
                            Establish Link
                        </button>
                        <button onclick="UtilCommon.showNext(this.closest('.util-card'))" 
                                class="btn btn-ghost btn-sm">
                            Skip this Suggestion
                        </button>
                    </div>
                </div>
            </div>
            {{end}}
        {{else}}
            <script>document.addEventListener('DOMContentLoaded', () => UtilCommon.showFinishedState())</script>
        {{end}}
    </div>

    <div class="side-action-btn hidden md:block w-24"></div>
{{end}}

{{define "scripts"}}
<script src="/static/js/util-common.js"></script>
<script src="/static/js/util-relationship.js"></script>
{{end}}