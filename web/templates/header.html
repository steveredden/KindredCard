{{define "header"}}
<header class="navbar bg-base-100 shadow-lg sticky top-0 z-50">
    <div class="container mx-auto px-4">
        <!-- Logo/Brand -->
        <div class="flex-none">
            <a href="/" class="btn btn-ghost normal-case text-xl gap-2">
                <!-- <span class="text-primary text-2xl">ğŸ’™</span> -->
                <span class="font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">
                    KindredCard
                </span>
            </a>
        </div>

        {{if .User}}

        <!-- Search Bar -->
        <div class="flex-1 px-6">
            <div class="dropdown w-full" id="search-dropdown">
                <div class="form-control relative w-full">
                    <input type="text" 
                        id="search-input"
                        name="q" 
                        placeholder="Search contacts..." 
                        class="input input-bordered w-full focus:input-primary pl-10 pr-20"
                        hx-get="/contacts/search-header" 
                        hx-trigger="keyup changed delay:300ms" 
                        hx-target="#search-results" 
                        hx-indicator="#search-spinner"
                        oninput="toggleClearButton(this)"
                        autocomplete="off" />
                    
                    <div class="absolute left-3 top-3.5 text-base-content/50">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4">
                            <path fill-rule="evenodd" d="M9.965 11.026a5 5 0 1 1 1.06-1.06l2.755 2.754a.75.75 0 1 1-1.06 1.06l-2.755-2.754ZM10.5 7a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0Z" clip-rule="evenodd" />
                        </svg>
                    </div>
                    
                    <div class="absolute right-3 top-3 flex items-center gap-2">
                        <span id="search-spinner" class="htmx-indicator loading loading-spinner loading-xs text-primary"></span>
                        <button type="button" 
                                id="clear-search" 
                                class="hidden btn btn-ghost btn-circle btn-xs" 
                                onclick="clearSearchInput()">
                            âœ•
                        </button>
                    </div>
                </div>
                
                <ul id="search-results" class="dropdown-content z-[50] menu p-2 shadow-2xl bg-base-100 rounded-box w-full mt-1 max-h-96 overflow-y-auto border border-base-300">
                </ul>
            </div>
        </div>
                
        <!-- Navigation Menu -->
        <div class="flex-none">
            <ul class="menu menu-horizontal px-1">
                <li><a href="/" class="{{if eq .ActivePage "contacts"}}active{{end}}">Contacts</a></li>
                <li><a href="/events" class="{{if eq .ActivePage "events"}}active{{end}}">Events</a></li>
                <li><a href="/settings" class="{{if eq .ActivePage "settings"}}active{{end}}">Settings</a></li>
            </ul>
        </div>
        
        <!-- Divider -->
        <div class="flex-none">
            <div class="divider divider-horizontal mx-1"></div>
        </div>
        
        <!-- Theme Switcher -->
        <div class="flex-none">
            <div class="dropdown dropdown-end">
                <label tabindex="0" class="btn btn-ghost btn-circle border border-base-300/50 bg-base-200/50 hover:bg-base-200 hover:border-base-300 mr-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01" />
                    </svg>
                </label>
                <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow-2xl bg-base-100 rounded-box w-96 max-h-96 overflow-y-auto">
                    <li class="menu-title"><span>Choose Theme</span></li>
                    <li><a onclick="setTheme('light')">â˜€ï¸ Light</a></li>
                    <li><a onclick="setTheme('dark')">ğŸŒ™ Dark</a></li>
                    <li><a onclick="setTheme('cupcake')">ğŸ§ Cupcake</a></li>
                    <li><a onclick="setTheme('bumblebee')">ğŸ Bumblebee</a></li>
                    <li><a onclick="setTheme('emerald')">ğŸ’š Emerald</a></li>
                    <li><a onclick="setTheme('corporate')">ğŸ’¼ Corporate</a></li>
                    <li><a onclick="setTheme('synthwave')">ğŸŒƒ Synthwave</a></li>
                    <li><a onclick="setTheme('retro')">ğŸ“¼ Retro</a></li>
                    <!-- <li><a onclick="setTheme('cyberpunk')">ğŸ¤– Cyberpunk</a></li> -->
                    <li><a onclick="setTheme('valentine')">ğŸ’ Valentine</a></li>
                    <li><a onclick="setTheme('halloween')">ğŸƒ Halloween</a></li>
                    <li><a onclick="setTheme('garden')">ğŸŒ¸ Garden</a></li>
                    <li><a onclick="setTheme('forest')">ğŸŒ² Forest</a></li>
                    <li><a onclick="setTheme('aqua')">ğŸŒŠ Aqua</a></li>
                    <li><a onclick="setTheme('lofi')">ğŸµ Lo-Fi</a></li>
                    <li><a onclick="setTheme('pastel')">ğŸ¨ Pastel</a></li>
                    <li><a onclick="setTheme('fantasy')">ğŸ¦„ Fantasy</a></li>
                    <!-- <li><a onclick="setTheme('wireframe')">ğŸ“ Wireframe</a></li> -->
                    <li><a onclick="setTheme('black')">â¬› Black</a></li>
                    <li><a onclick="setTheme('luxury')">ğŸ’ Luxury</a></li>
                    <li><a onclick="setTheme('dracula')">ğŸ§› Dracula</a></li>
                    <li><a onclick="setTheme('business')">ğŸ‘” Business</a></li>
                    <li><a onclick="setTheme('night')">ğŸŒƒ Night</a></li>
                    <li><a onclick="setTheme('coffee')">â˜• Coffee</a></li>
                    <li><a onclick="setTheme('winter')">â„ï¸ Winter</a></li>
                </ul>
            </div>
        </div>
        
        <!-- User Menu -->
        <div class="flex-none">
            <div class="dropdown dropdown-end">
                <label tabindex="0" class="btn btn-ghost btn-circle border border-base-300/50 bg-base-200/50 hover:bg-base-200 hover:border-base-300 avatar placeholder mr-2">
                    <div class="bg-neutral-focus text-neutral-content rounded-full w-10">
                        <span class="text-xl">{{if .User.Email}}{{initial .User.Email}}{{else}}U{{end}}</span>
                    </div>
                </label>
                <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow-2xl bg-base-100 rounded-box w-64">
                    <li class="menu-title">
                        <span>{{.User.Email}}</span>
                    </li>
                    <li><a href="/settings">âš™ï¸ Settings</a></li>
                    <li><a href="/swagger/index.html">ğŸ“˜ Swagger</a></li>
                    <li><a href="/logout">ğŸšª Logout</a></li>
                </ul>
            </div>
        </div>
        {{end}}
    </div>
</header>
{{end}}
